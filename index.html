<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carnet Veterinario</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <img src="logo.png" alt="Logo Vitavet" class="logo" />
    <h1>Carnet Veterinario</h1>

    <div class="selector">
      <label for="tipo">Tipo de reporte:</label>
      <select id="tipo" onchange="mostrarFormulario()">
        <option value="">-- Seleccionar --</option>
        <option value="vacunacion">Vacunación</option>
        <option value="desparasitacion">Desparasitación</option>
      </select>
    </div>

    <form id="formulario">
      <div id="datos-generales">
        <h3>Datos del Paciente</h3>
        <label>Especie:</label>
        <select id="especie" required>
          <option value="Canino">Canino</option>
          <option value="Felino">Felino</option>
        </select>

        <label>Nombre:</label>
        <input type="text" id="nombreAnimal" required />

        <label>Sexo:</label>
        <select id="sexo" required>
          <option value="Macho">Macho</option>
          <option value="Hembra">Hembra</option>
        </select>

        <label>Edad:</label>
        <div class="peso-group">
          <input type="number" id="edad" placeholder="Ej: 3" required />
          <select id="unidadEdad">
            <option value="años">Años</option>
            <option value="meses">Meses</option>
          </select>
        </div>

        <label>Propietario:</label>
        <input type="text" id="propietario" required />

        <label>Teléfono:</label>
        <input type="text" id="telefono" required />

        <label>Dirección:</label>
        <input type="text" id="direccion" required />
      </div>

      <div class="tabla-clinica">
        <table border="1" style="width: 100%; border-collapse: collapse; text-align: center;">
          <thead>
            <tr style="background: #e0f2f1;">
              <th colspan="4">VACUNACIÓN</th>
              <th colspan="5">DESPARASITACIÓN</th>
            </tr>
            <tr>
              <th>FECHA</th>
              <th>VACUNAS</th>
              <th>PRÓX. VAC.</th>
              <th>FIRMA</th>
              <th>FECHA</th>
              <th>PESO</th>
              <th>PRODUCTO</th>
              <th>PRÓX. DESP.</th>
              <th>FIRMA</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="date" id="fechaVac" /></td>
              <td><input type="text" id="vacunas" /></td>
              <td><input type="date" id="proxVac" /></td>
              <td><img src="firma_2.png" style="width: 80px;" /></td>
              <td><input type="date" id="fechaDesp" /></td>
              <td>
                <div class="peso-group">
                  <input type="number" id="peso" />
                  <select id="unidadPeso">
                    <option value="kg">kg</option>
                    <option value="lb">lb</option>
                  </select>
                </div>
              </td>
              <td><input type="text" id="producto" /></td>
              <td><input type="date" id="proxDesp" /></td>
              <td><img src="firma_2.png" style="width: 80px;" /></td>
            </tr>
          </tbody>
        </table>
      </div>

      <button type="button" class="btn-generar" onclick="generarPDF()">Generar PDF</button>
    </form>
  </div>

  <!-- Modal de carga -->
  <div id="loading-modal" class="loading-modal">
    <div class="loading-content">
      <div class="spinner"></div>
      <p id="loading-text">Generando PDF...</p>
    </div>
  </div>

  <!-- Plantilla PDF -->
  <div id="plantilla-pdf">
    <div style="font-family: Arial; padding: 20px; border: 2px solid #555; max-width: 800px; margin: auto;">
      <div style="text-align: center;">
        <img src="logo.png" style="width: 80px;" />
        <h2 style="margin: 10px 0;">REGISTRO DE VACUNAS/DESPARASITACIÓN</h2>
      </div>
      <table style="width: 100%; margin-bottom: 15px; font-size: 14px;">
        <tr>
          <td><strong>ESPECIE:</strong> <span id="out-especie"></span></td>
          <td><strong>SEXO:</strong> <span id="out-sexo"></span></td>
          <td><strong>PROPIETARIO:</strong> <span id="out-propietario"></span></td>
        </tr>
        <tr>
          <td><strong>NOMBRE:</strong> <span id="out-nombre"></span></td>
          <td><strong>EDAD:</strong> <span id="out-edad"></span></td>
          <td><strong>TELÉFONO:</strong> <span id="out-telefono"></span></td>
        </tr>
        <tr>
          <td colspan="3"><strong>DIRECCIÓN:</strong> <span id="out-direccion"></span></td>
        </tr>
      </table>

      <!-- TABLA EN PDF -->
      <table border="1" style="width: 100%; border-collapse: collapse; text-align: center;">
        <thead>
          <tr style="background: #e0f2f1;">
            <th colspan="4">VACUNACIÓN</th>
            <th colspan="5">DESPARASITACIÓN</th>
          </tr>
          <tr>
            <th>FECHA</th>
            <th>VACUNAS</th>
            <th>PRÓX. VAC.</th>
            <th>FIRMA</th>
            <th>FECHA</th>
            <th>PESO</th>
            <th>PRODUCTO</th>
            <th>PRÓX. DESP.</th>
            <th>FIRMA</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td id="out-fechaVac"></td>
            <td id="out-vacunas"></td>
            <td id="out-proxVac"></td>
            <td><img src="firma_2.png" style="width: 80px;" /></td>
            <td id="out-fechaDesp"></td>
            <td id="out-peso"></td>
            <td id="out-producto"></td>
            <td id="out-proxDesp"></td>
            <td><img src="firma_2.png" style="width: 80px;" /></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <script src="html2pdf.bundle.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
